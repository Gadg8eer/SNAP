namespace = SNAP_events_CodyGibling_Gadg8eer

# Game start
event = {
	id = SNAP_events_CodyGibling_Gadg8eer.0
	hide_window = yes
	is_triggered_only = no

	immediate = {
		limit = {
			is_ai = no # Only human players
		}
		SNAP_scripted_effect_CodyGibling_Gadg8eer_start_0 = yes
		every_country = {
			limit = {
				NOT = {
					has_global_flag = global_SNAP_rulerclaim_CodyGibling_Gadg8eer
				}
				exists = ruler
				ruler = {
					OR = {
							has_trait = leader_trait_SNAP_CodyGibling_Gadg8eer
							has_trait = leader_trait_SNAP_CodyGibling_quick_Gadg8eer
							has_trait = leader_trait_SNAP_CodyGibling_social_Gadg8eer
							has_trait = leader_trait_SNAP_CodyGibling_playing_Gadg8eer
					}
				}
			}
			set_global_flag = global_SNAP_rulerclaim_CodyGibling_Gadg8eer
			if = {
				limit = {
					NOT = {
						has_global_flag = global_SNAP_rulerclaim_CodyGibling_Gadg8eer
					}
					exists = ruler
					ruler = {
						NAND = {
							OR = {
								has_trait = leader_trait_SNAP_CodyGibling_Gadg8eer
								has_trait = leader_trait_SNAP_CodyGibling_quick_Gadg8eer
								has_trait = leader_trait_SNAP_CodyGibling_social_Gadg8eer
							}
							has_trait = leader_trait_SNAP_CodyGibling_playing_Gadg8eer
						}
					}
				}
				set_global_flag = global_SNAP_rulerclaim_CodyGibling_Gadg8eer
				ruler = {
					set_leader_flag = event_target_SNAP_CodyGibling_Gadg8eer
					# Force age to 8 until a later date
					set_age = 8
					# Optionally check if the name is not what you want
					if = {
						limit = {
							NOT = {
								check_variable = {
									which = name value = "Gadg8eer"
								}
							}
						}
						set_name = {
							name = "leader_CodyGibling_Gadg8eer"
						}
					}
				}
			}
			fire_event = {
				id = SNAP_events_CodyGibling_Gadg8eer.1
				days = 1
			}
		} else_if = {
			limit = {
				has_trait = leader_trait_SNAP_CodyGibling_playing_Gadg8eer
			}
			immediate = {
				ruler = {
					set_leader_flag = event_target_SNAP_CodyGibling_Gadg8eer
					# Force age to 8 until a later date
					set_age = 8
					# Optionally check if the name is not what you want
					if = {
						limit = {
							NOT = {
								check_variable = {
									which = name value = "Gadg8eer"
								}
							}
						}
						set_name = {
							name = "leader_CodyGibling_Gadg8eer"
						}
					}
				}
				fire_event = {
					id = SNAP_events_CodyGibling_Gadg8eer.9
					days = 248
				}
			}
		}
	}
	limit = {
		is_ai = no # Only human players
	}
	SNAP_scripted_effect_CodyGibling_Gadg8eer_start_0 = yes
	fire_event = {
		id = SNAP_events_CodyGibling_Gadg8eer.1
		days = 1
	}
}

# January 2nd, game start year
event = {
	id = SNAP_events_CodyGibling_Gadg8eer.1
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		limit = {
			AND = {
				has_global_flag = global_SNAP_rulerclaim_CodyGibling_Gadg8eer
				is_ai = no # Only human players
			}
		}
		every_country = {
			limit = {
				exists = ruler
				ruler = {
					has_leader_flag = event_target_SNAP_CodyGibling_Gadg8eer
					NOT = {
						has_trait = leader_trait_SNAP_CodyGibling_playing_Gadg8eer
					}
				}
			}
			ruler = {
				# Optionally check if the name is not what you want
				if = {
					limit = {
						NOT = {
							check_variable = {
								which = name value = "Gadg8eer"
							}
						}
					}
					set_name = {
						name = "leader_CodyGibling_Gadg8eer"
					}
				}
			}
			fire_event = {
			id = SNAP_events_CodyGibling_Gadg8eer.2
			days = 249
			}
		}
	}
}

# August 10th, game start year
event = {
	id = SNAP_events_CodyGibling_Gadg8eer.2
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		limit = {
			AND = {
				has_global_flag = global_SNAP_rulerclaim_CodyGibling_Gadg8eer
				is_ai = no # Only human players
			}
		}
		every_country = {
			limit = {
				exists = ruler
				ruler = {
					has_leader_flag = event_target_SNAP_CodyGibling_Gadg8eer
				}
			}
			ruler = {
				# Force age to 9
				set_age = 9
				# Optionally check if the name is not what you want
				if = {
					limit = {
						NOT = {
							check_variable = {
								which = name value = "Gadg8eer"
							}
						}
					}
					set_name = {
						name = "leader_CodyGibling_Gadg8eer"
					}
				}
			}
		}
		fire_event = {
			id = SNAP_events_CodyGibling_Gadg8eer.3
			days = 360
		}
	}
}

# August 10th, game start year plus 1
event = {
	id = SNAP_events_CodyGibling_Gadg8eer.3
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		limit = {
			AND = {
				has_global_flag = global_SNAP_rulerclaim_CodyGibling_Gadg8eer
				is_ai = no # Only human players
			}
		}
		every_country = {
			limit = {
				exists = ruler
				ruler = {
					has_leader_flag = event_target_SNAP_CodyGibling_Gadg8eer
				}
			}
			ruler = {
				# Force age to 10, but only once
				if = {
					limit = {
						NOT = {
							has_global_flag = global_SNAP_rulerprep_CodyGibling_Gadg8eer
						}
					}
					set_age = 10
					set_global_flag = global_SNAP_rulerprep_CodyGibling_Gadg8eer
				}
				# Optionally check if the name is not what you want
				if = {
					limit = {
						NOT = {
							check_variable = {
								which = name value = "Gadg8eer"
							}
						}
					}
					set_name = {
						name = "leader_CodyGibling_Gadg8eer"
					}
				}
			}
		}
	}
}

event = {
	id = SNAP_events_CodyGibling_Gadg8eer.4
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		ruler = {
			AND = {
				has_leader_flag = event_target_SNAP_CodyGibling_Gadg8eer
				leader_age = 85
				is_immortal = no
				has_global_flag = global_SNAP_rulerclaim_CodyGibling_Gadg8eer
				is_ai = no # Only human players
			}
		}
	}
	
	immediate = {
		if = {
			limit = {
				exists = ruler
				ruler = {
					has_leader_flag = event_target_SNAP_CodyGibling_Gadg8eer
					AND = {
						leader_age = 85
						is_immortal = no
						}
					}
				}
			}
			fire_event = {
				id = SNAP_events_CodyGibling_Gadg8eer.5
				days = 359
			}
		}
	}
}

event = {
	id = SNAP_events_CodyGibling_Gadg8eer.5
	hide_window = yes
	is_triggered_only = no

	immediate = {
		if = {
			limit = {
				exists = ruler
				who = {
					event_target_SNAP_CodyGibling_Gadg8eer = {
						leader_age = 85
						is_immortal = no
					}
				}
			}
			who = {
				event_target_SNAP_CodyGibling_Gadg8eer = {
					kill_leader = {
						show_notification = no
						fire = no
					}
				}
			}
			set_global_flag = SNAP_CodyGibling_Gadg8eer_is_dead
				if = {
					limit = {
						is_multiplayer = yes
					}
					owner = {
						country = {
							destroy_country = yes #If player tries to forcibly removed Gadg8eer, it will "allow" it but triggers an event. Choosing to proceed removes that player from the game.
						}
					}
				} else_if = {
					limit = {
						is_multiplayer = no
					}
					end_game = yes
				}
		} else_if = {
			limit = {
				who = {
					event_target_SNAP_CodyGibling_Gadg8eer = {
						has_leader_flag = leader_is_SNAP_CodyGibling_Gadg8eer
						OR = {
							AND = {
								leader_age = 86
								is_immortal = yes
							}
							OR = {
								has_trait = leader_trait_SNAP_CodyGibling_Gadg8eer
								has_trait = leader_trait_SNAP_CodyGibling_quick_Gadg8eer
								has_trait = leader_trait_SNAP_CodyGibling_social_Gadg8eer
							}
						}
					}
				}
			}
			immediate = {
				who = {
					event_target_SNAP_CodyGibling_Gadg8eer = {
						set_immortal = no
						remove_trait = leader_trait_snap_protected_youth
					}
				}
			}
		}
	}
}

event = {
	id = SNAP_events_CodyGibling_Gadg8eer.9
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		limit = {
			AND = {
			has_global_flag = global_SNAP_rulerclaim_CodyGibling_Gadg8eer
				is_ai = no # Only human players
				NOT = {
					has_global_flag = global_SNAP_rulerprep_CodyGibling_Gadg8eer
				}
			}
		}
		set_global_flag = global_SNAP_rulerprep_CodyGibling_Gadg8eer
	}
}

event = {
	id = SNAP_events_CodyGibling_Gadg8eer.10
	hide_window = yes
	is_triggered_only = no

	immediate = {
		limit = {
			AND = {
				has_global_flag = global_SNAP_rulerclaim_CodyGibling_Gadg8eer
				is_ai = no # Only human players
				has_global_flag = global_SNAP_rulerprep_CodyGibling_Gadg8eer
			}
		}
		every_country = {
			limit = {
				exists = ruler
				ruler = {
				who = {
						event_target_SNAP_CodyGibling_Gadg8eer = {
							AND = {
								has_trait = leader_trait_SNAP_CodyGibling_playing_Gadg8eer
								NOT = {
									leader_age = 10
								}
								NOT = {
									is_immortal = yes
								}
							}
						}
					}
				}
			}
			ruler = {
				# Force age to 10 each day
				if = {
					limit = {
						AND = {
							has_global_flag = global_SNAP_rulerprep_CodyGibling_Gadg8eer
							has_leader_flag = event_target_SNAP_CodyGibling_Gadg8eer
							has_trait = leader_trait_SNAP_CodyGibling_playing_Gadg8eer
						}
					}
					set_age = 10
				}
				# Optionally check if the name is not what you want
				if = {
					limit = {
						NOT = {
							check_variable = {
								which = name value = "Gadg8eer"
							}
						}
					}
					set_name = {
						name = "leader_CodyGibling_Gadg8eer"
					}
				}
			}
		}
	}
}
