namespace = snap_CodyGibling_Gadg8eer

# This file is part of the Stellaris Novelty Avatar Portraits (SNAP) mod for Stellaris. Avatar as in "a persona" or "a VR metaverse avatar", not the Na'vi clones in the James Cameron movies (nor anything to do with the Nickelodeon animated series "The Last Airbender" either for that matter). It basically makes anything you can depict lore-friendly by implying that anything impossible is exclusive to a simulated "metaverse".
#-------------------------------------------------------------------------------------------------------------------------------------------#
# The character portraits provided by this file are used under a license or with the permission of the character's creator.
# Please read the code comments (the "# Stuff gets described in text." thingies just below this) to understand what is and isn't legally okay to do with this artist's works. Thank you.
#-------------------------------------------------------------------------------------------------------------------------------------------#
# Gadg8eer © 1990-2025 Cody Gibling. All Rights reserved.                                                                                    #
# Gadg8eer™ as a fictional character is a trademark of Cody Gibling under Canadian trademark law.                                            #
# Please don't use without permission, you'd be messing with my persona.                                                                    #
#-------------------------------------------------------------------------------------------------------------------------------------------#
# (Trademarked; I, the original creator of this file and of the Stellaris Novelty Avatar Portraits mod, am the one who goes by the name Cody Gibling, though to be honest its a pen name because I like my work to be able to stand on its own merits. Please don't repost this file or any image file of Gadg8eer anywhere except as part of SNAP or a derivitave of SNAP, and only on Stellaris mod-related websites (Steam, the Stellaris community on the FediVerse, Good Old Games, Stellaris fan forums and Guilded servers, etc.), though anyone is free to update the mod including this file for the purposes of getting it to run with any version of Stellaris they prefer as long as they include these paragraphs.)
#-------------------------------------------------------------------------------------------------------------------------------------------#
# If you understand and accept the above conditions, you may proceed.

### At the game start, set Gadg8eer's age to 10 (but do NOT enforce it yet), enforce his name, and set his maximum lifespan to 85
global_event = {
    id = snap_CodyGibling_Gadg8eer.0
    hide_window = yes
    # title = snap_CodyGibling_Gadg8eer.0.name
    # desc = snap_CodyGibling_Gadg8eer.0.desc_01
    is_triggered_only = yes
    fire_only_once = yes
    # title = snap_CodyGibling_Gadg8eer.0.name
    # desc = snap_CodyGibling_Gadg8eer.0.desc_01

    # picture = GFX_evt_astral_rift_tomb
    # show_sound = event_default
    pre_triggers = {
        has_owner = yes                # whether the leader exists and is alive
        is_idle = no                # whether the leader is idle
    }
    immediate = {
        every_country = {
            every_owned_leader = {
                if = {
                    limit = {
                        AND = {
                            NOT = {
                                has_global_flag = global_SNAP_rulerclaim_CodyGibling_Gadg8eer
                            }
                            OR = {
                                has_ruler_trait = leader_trait_SNAP_codygibling_gadg8eer
                                has_ruler_trait = leader_trait_SNAP_codygibling_quick_gadg8eer
                                has_ruler_trait = leader_trait_SNAP_codygibling_social_gadg8eer
                                has_ruler_trait = leader_trait_SNAP_codygibling_playing_gadg8eer
                            }
                        }
                    }
                    effect = { # SNAP_scripted_effects
                        set_global_flag = SNAP_scripted_effect_CodyGibling_Gadg8eer_start_0
                    #    set_leader_flag = CodyGibling_Gadg8eer
                    }
                }
            }
        }
    }
}

country_event = {
    id = snap_CodyGibling_Gadg8eer.1
    hide_window = yes
    is_triggered_only = yes
    fire_only_once = yes
    # title = snap_CodyGibling_Gadg8eer.1.name
    # desc = snap_CodyGibling_Gadg8eer.1.desc_01

    pre_triggers = {
        has_owner = yes                # whether the leader exists and is alive
        is_idle = no                   # whether the leader is idle

    }
    trigger = { # SNAP_scripted_triggers
        has_global_flag = SNAP_scripted_effect_CodyGibling_Gadg8eer_start_0
    }
    effect = { # SNAP_scripted_effects
        set_leader_flag = CodyGibling_Gadg8eer
        set_leader_flag = prevent_remove_gadg8eer
        SNAP_start_1_gadg8eer = true
    }
}

### If Gadg8eer becomes 86 years old, he dies.
leader_event = {
    id = snap_CodyGibling_Gadg8eer.4
    title = snap_CodyGibling_Gadg8eer.4.name
    desc = snap_CodyGibling_Gadg8eer.4.desc_01
    is_triggered_only = yes

    picture = GFX_evt_astral_rift_tomb
    show_sound = event_default
    auto_opens = yes
    fire_only_once = yes

    trigger = { # SNAP_scripted_triggers
        limit = {
            leader_age > 85
            has_ruler_trait = whatever_trait
        }
    }
    effect = { #
        set_global_flag = CodyGibling_Gadg8eer_game_over
        fire_on_action = {
            on_action = on_death_CodyGibling_Gadg8eer
        }
    }

### If Gadg8eer dies by accident or turns 86 years old without any form of immortality, it's game over.
leader_event = {
    id = snap_CodyGibling_Gadg8eer.42

    option = {
        name = snap_CodyGibling_Gadg8eer.42.a # Game over
        custom_tooltip = snap_CodyGibling_Gadg8eer.42.a.tooltip
        allow = {
            owner = {
                ruler = {
                    is_immortal = no
                    hidden_trigger = {
                        AND = {
                            if = {
                                limit = {
                                    hidden_trigger = {
                                        has_global_flag = CodyGibling_Gadg8eer_game_over
                                        NOT = {
                                            has_leader_flag = is_deadbutdreaming_gadg8eer
                                            has_leader_flag = is_deadbutrespawns_gadg8eer
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        after = {
            # Effects that are applied after option is chosen.
            # Will generate a tooltip in addition the tooltip of every option, unless hidden_effect is used.
            hidden_effect = {
                destroy_country = yes
            }
        }
    }

### If Gadg8eer manages to achieve miscellaneous immortality, but dies to an event, he can be saved ONCE by rejuvenation and cloning tech.
    option = {
        name = snap_CodyGibling_Gadg8eer.42.b # Saved by biological immortality or some other form of immortality
        custom_tooltip = snap_CodyGibling_Gadg8eer.42.b.tooltip
        allow = {
            owner = {
                ruler = {
                    is_immortal = yes
                    AND = {
                        if = {
                            limit = {
                                hidden_trigger = {
                                    has_global_flag = CodyGibling_Gadg8eer_game_over
                                }
                                NOT = {
                                    has_leader_flag = is_deadbutdreaming_gadg8eer
                                    has_leader_flag = is_deadbutrespawns_gadg8eer
                                }
                            }
                        }
                    }
                }
            }
        }
        after = {
            # Effects that are applied after option is chosen.
            # Will generate a tooltip in addition the tooltip of every option, unless hidden_effect is used.
            hidden_effect = {
                set_immortal = no
            }
        }
    }

### If Gadg8eer is a Conceptoid, he wakes up in a new dreamscape when he dies
    option = {
        name = snap_CodyGibling_Gadg8eer.42.c # Conceptoid
        custom_tooltip = snap_CodyGibling_Gadg8eer.42.c.tooltip
        allow = {
            owner = {
                ruler = {
                    OR = {
                        hidden_trigger = {
                            AND = {
                                has_global_flag = CodyGibling_Gadg8eer_game_over
                                has_leader_flag = is_deadbutdreaming_gadg8eer
                                has_trait = trait_conceptoid
                            }
                        }
                        has_trait = trait_conceptoid
                    }
                }
            }
        }
        after = {
            # Effects that are applied after option is chosen.
            # Will generate a tooltip in addition the tooltip of every option, unless hidden_effect is used.
            hidden_effect = {
                set_leader_flag = is_deadbutdreaming_gadg8eer
                remove_global_flag = CodyGibling_Gadg8eer_game_over
            }
        }
    }

### If Gadg8eer's empire manages to get the right ascension perks, he respawns when he dies
    option = {
        name = snap_CodyGibling_Gadg8eer.42.d # Is immortal as a virtual entity
        custom_tooltip = snap_CodyGibling_Gadg8eer.42.d.tooltip
        allow = {
            owner = {
                ruler = {
                    OR = {
                        hidden_trigger = {
                            AND = {
                                has_global_flag = CodyGibling_Gadg8eer_game_over
                                has_leader_flag = is_deadbutrespawns_gadg8eer
                                has_trait = trait_virtual
                            }
                        }
                        has_trait = trait_virtual
                    }
                }
            }
        }
        after = {
            # Effects that are applied after option is chosen.
            # Will generate a tooltip in addition the tooltip of every option, unless hidden_effect is used.
            hidden_effect = {
                set_leader_flag = is_deadbutrespawns_gadg8eer
				set_leader_flag = prevent_remove_gadg8eer
                remove_global_flag = CodyGibling_Gadg8eer_game_over
            }
        }
    }
}

##### Section to prevent removal. Note: You as the player cannot remove him, but the people can! This includes elections
### If the player attempts to remove Gadg8eer from power, he will be automatically reinstated and an event will trigger.
leader_event = {
    id = snap_CodyGibling_Gadg8eer.2
    title = snap_CodyGibling_Gadg8eer.2.name
    desc = snap_CodyGibling_Gadg8eer.2.desc_01
    is_triggered_only = yes

    picture = GFX_origin_legendary_leader
    show_sound = event_default
    auto_opens = yes
    fire_only_once = yes

    trigger = { # SNAP_scripted_triggers
        has_leader_flag = prevent_remove_gadg8eer
    }

### The "can't remove this ruler" message, part of the above.
    option = {
        name = snap_CodyGibling_Gadg8eer.2.a # Game over
        custom_tooltip = snap_CodyGibling_Gadg8eer.2.a.tooltip
        trigger = {
            who = {
                event_target:Gadg8eer = {
                    has_leader_flag = prevent_remove_gadg8eer
                }
            }
            immediate = {
                remove_leader_flag = prevent_remove_gadg8eer
            }
        }
    }
	option = {
        name = snap_CodyGibling_Gadg8eer.2.b # Game over
        custom_tooltip = snap_CodyGibling_Gadg8eer.2.b.tooltip
        trigger = {
            who = {
                event_target:Gadg8eer = {
                    has_leader_flag = prevent_remove_gadg8eer
                }
            }
            after = {
                hidden_effect = {
                    end_game = yes
                }
            }
        }
    }
}
##### End of section to prevent removal.
